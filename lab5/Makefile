.PHONY: help build up down logs clean test test-unit test-integration test-all test-smoke test-api save-openapi db-migrate db-upgrade env-check perf-setup perf-test perf-test-1 perf-test-5 perf-test-10 perf-test-all cache-clear cache-stats

help:
	@echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
	@echo "  build        - –°–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã"
	@echo "  up           - –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã"
	@echo "  down         - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã"
	@echo "  logs         - –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤"
	@echo "  clean        - –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑—ã –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã"
	@echo "  test         - –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã (pytest)"
	@echo "  test-unit    - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã"
	@echo "  test-integration - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã"
	@echo "  test-api     - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Å—Ç—ã–µ API —Ç–µ—Å—Ç—ã (curl)"
	@echo "  test-smoke   - –ó–∞–ø—É—Å—Ç–∏—Ç—å smoke —Ç–µ—Å—Ç—ã"
	@echo "  save-openapi - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏"
	@echo "  db-migrate   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é"
	@echo "  db-upgrade   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏"
	@echo "  env-check    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è"
	@echo ""
	@echo "üöÄ –ö–æ–º–∞–Ω–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:"
	@echo "  perf-setup   - –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è performance —Ç–µ—Å—Ç–æ–≤"
	@echo "  perf-test-1  - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å 1 –ø–æ—Ç–æ–∫–æ–º"
	@echo "  perf-test-5  - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å 5 –ø–æ—Ç–æ–∫–∞–º–∏"
	@echo "  perf-test-10 - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å 10 –ø–æ—Ç–æ–∫–∞–º–∏"
	@echo "  perf-test-all- –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"
	@echo "  perf-direct-cache   - –¢–µ—Å—Ç Planning Service —Å –∫–µ—à–µ–º (5 –ø–æ—Ç–æ–∫–æ–≤)"
	@echo "  perf-direct-no-cache- –¢–µ—Å—Ç Planning Service –±–µ–∑ –∫–µ—à–∞ (5 –ø–æ—Ç–æ–∫–æ–≤)"
	@echo "  perf-direct-compare - –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç —Å –∫–µ—à–µ–º –∏ –±–µ–∑ –∫–µ—à–∞"
	@echo "  cache-clear  - –û—á–∏—Å—Ç–∏—Ç—å Redis –∫–µ—à"
	@echo "  cache-stats  - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É Redis –∫–µ—à–∞"

build:
	docker-compose build

up:
	docker-compose up --build

down:
	docker-compose down

logs:
	docker-compose logs -f

clean:
	docker-compose down -v --rmi all
	docker system prune -f

test:
	@echo "üß™ –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ pytest..."
	@echo "–û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤..."
	@sleep 5
	@export PYTHONPATH="$(shell pwd)/src/api-gateway:$(shell pwd)/src/planning-service" && \
	python -m pytest tests/ -v --tb=short

test-unit:
	@echo "üî¨ –ó–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç–æ–≤..."
	@export PYTHONPATH="$(shell pwd)/src/api-gateway:$(shell pwd)/src/planning-service" && \
	python -m pytest tests/ -v --tb=short -m "not integration"

test-integration:
	@echo "üîó –ó–∞–ø—É—Å–∫ integration —Ç–µ—Å—Ç–æ–≤..."
	@echo "–û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤..."
	@sleep 5
	@export PYTHONPATH="$(shell pwd)/src/api-gateway:$(shell pwd)/src/planning-service" && \
	python -m pytest tests/test_integration.py -v --tb=short

test-smoke:
	@echo "üí® –ó–∞–ø—É—Å–∫ smoke —Ç–µ—Å—Ç–æ–≤..."
	@export PYTHONPATH="$(shell pwd)/src/api-gateway:$(shell pwd)/src/planning-service" && \
	python -m pytest tests/ -v --tb=short -k "health_check"

test-api:
	@echo "üåê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ curl..."
	@echo "–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤..."
	@sleep 10
	@echo "1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:"
	curl -X POST "http://localhost:8000/auth/login" \
		-H "Content-Type: application/json" \
		-d '{"username": "admin", "password": "secret"}' | jq
	@echo "\n2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤:"
	curl http://localhost:8000/health | jq
	curl http://localhost:8081/health | jq

save-openapi:
	@echo "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π..."
	python save_openapi.py

db-migrate:
	@echo "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏..."
	cd src/planning-service && alembic revision --autogenerate -m "$(MSG)"

db-upgrade:
	@echo "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π..."
	cd src/planning-service && alembic upgrade head

env-check:
	@echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è..."
	@echo "1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:"
	@if [ -f .env ]; then \
		echo "–§–∞–π–ª .env –Ω–∞–π–¥–µ–Ω"; \
	else \
		echo "–§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ env.example –≤ .env"; \
	fi
	@echo "2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:"
	docker-compose config --quiet && echo "docker-compose.yml –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω" || echo "–û—à–∏–±–∫–∞ –≤ docker-compose.yml"
	@echo "3. –°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:"
	@echo "–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:"
	@echo "   - SECRET_KEY (–¥–ª—è JWT)"
	@echo "   - DATABASE_URL (–¥–ª—è PostgreSQL)" 
	@echo "   - PLANNING_SERVICE_URL (–¥–ª—è API Gateway)"
	@echo ""
	@echo "–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: ENVIRONMENT.md"

# Performance Testing Commands
perf-setup:
	@echo "üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è performance —Ç–µ—Å—Ç–æ–≤..."
	@echo "–û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤..."
	@sleep 10
	@echo "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤..."
	pip install requests
	@echo "–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö..."
	cd performance_tests/test_scripts && python setup_test_data.py
	@echo "‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã!"

perf-test-1:
	@echo "üöÄ –ó–∞–ø—É—Å–∫ performance —Ç–µ—Å—Ç–∞ —Å 1 –ø–æ—Ç–æ–∫–æ–º..."
	@$(MAKE) _check_wrk
	@echo "–û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º..."
	@$(MAKE) cache-clear
	@echo "–ü—Ä–æ–≥—Ä–µ–≤ –∫–µ—à–∞ —á–µ—Ä–µ–∑ API Gateway..."
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) curl -H "Authorization: Bearer $$AUTH_TOKEN" http://localhost:8000/api/plans > /dev/null 2>&1 || true
	@echo "\n=== –¢–ï–°–¢ –° –ö–ï–®–ï–ú —á–µ—Ä–µ–∑ API Gateway (1 –ø–æ—Ç–æ–∫) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t1 -c1 -d30s -s performance_tests/wrk_scripts/get_plans.lua http://localhost:8000
	@echo "\n=== –¢–ï–°–¢ –ë–ï–ó –ö–ï–®–ê —á–µ—Ä–µ–∑ Planning Service (1 –ø–æ—Ç–æ–∫) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t1 -c1 -d30s -s performance_tests/wrk_scripts/get_plans_no_cache.lua http://localhost:8081

perf-test-5:
	@echo "üöÄ –ó–∞–ø—É—Å–∫ performance —Ç–µ—Å—Ç–∞ —Å 5 –ø–æ—Ç–æ–∫–∞–º–∏..."
	@$(MAKE) _check_wrk
	@echo "–û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º..."
	@$(MAKE) cache-clear
	@echo "–ü—Ä–æ–≥—Ä–µ–≤ –∫–µ—à–∞ —á–µ—Ä–µ–∑ API Gateway..."
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) curl -H "Authorization: Bearer $$AUTH_TOKEN" http://localhost:8000/api/plans > /dev/null 2>&1 || true
	@echo "\n=== –¢–ï–°–¢ –° –ö–ï–®–ï–ú —á–µ—Ä–µ–∑ API Gateway (5 –ø–æ—Ç–æ–∫–æ–≤) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t5 -c5 -d30s -s performance_tests/wrk_scripts/get_plans.lua http://localhost:8000
	@echo "\n=== –¢–ï–°–¢ –ë–ï–ó –ö–ï–®–ê —á–µ—Ä–µ–∑ Planning Service (5 –ø–æ—Ç–æ–∫–æ–≤) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t5 -c5 -d30s -s performance_tests/wrk_scripts/get_plans_no_cache.lua http://localhost:8081

perf-test-10:
	@echo "üöÄ –ó–∞–ø—É—Å–∫ performance —Ç–µ—Å—Ç–∞ —Å 10 –ø–æ—Ç–æ–∫–∞–º–∏..."
	@$(MAKE) _check_wrk
	@echo "–û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º..."
	@$(MAKE) cache-clear
	@echo "–ü—Ä–æ–≥—Ä–µ–≤ –∫–µ—à–∞ —á–µ—Ä–µ–∑ API Gateway..."
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) curl -H "Authorization: Bearer $$AUTH_TOKEN" http://localhost:8000/api/plans > /dev/null 2>&1 || true
	@echo "\n=== –¢–ï–°–¢ –° –ö–ï–®–ï–ú —á–µ—Ä–µ–∑ API Gateway (10 –ø–æ—Ç–æ–∫–æ–≤) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t10 -c10 -d30s -s performance_tests/wrk_scripts/get_plans.lua http://localhost:8000
	@echo "\n=== –¢–ï–°–¢ –ë–ï–ó –ö–ï–®–ê —á–µ—Ä–µ–∑ Planning Service (10 –ø–æ—Ç–æ–∫–æ–≤) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t10 -c10 -d30s -s performance_tests/wrk_scripts/get_plans_no_cache.lua http://localhost:8081

perf-test-all:
	@echo "üéØ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ performance —Ç–µ—Å—Ç–æ–≤..."
	@echo "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö..."
	@$(MAKE) perf-setup
	@echo "\nüî• –ù–ê–ß–ò–ù–ê–ï–ú –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï..."
	@$(MAKE) perf-test-1
	@echo "\n‚è≥ –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏..."
	@sleep 5
	@$(MAKE) perf-test-5
	@echo "\n‚è≥ –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏..."
	@sleep 5
	@$(MAKE) perf-test-10
	@echo "\n‚úÖ –í—Å–µ performance —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã!"

perf-direct-cache:
	@echo "üöÄ –¢–µ—Å—Ç Planning Service —Å –∫–µ—à–µ–º (5 –ø–æ—Ç–æ–∫–æ–≤)..."
	@$(MAKE) _check_wrk
	@echo "–û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º..."
	@$(MAKE) cache-clear
	@echo "–ü—Ä–æ–≥—Ä–µ–≤ –∫–µ—à–∞ –Ω–∞–ø—Ä—è–º—É—é –∫ Planning Service..."
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) curl -s -H "Authorization: Bearer $$AUTH_TOKEN" -H "X-User: admin" http://localhost:8081/plans > /dev/null && echo "–ö–µ—à –ø—Ä–æ–≥—Ä–µ—Ç"
	@echo "\n=== –¢–ï–°–¢ –° –ü–†–û–ì–†–ï–¢–´–ú –ö–ï–®–ï–ú Planning Service (5 –ø–æ—Ç–æ–∫–æ–≤) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t5 -c5 -d30s -s performance_tests/wrk_scripts/get_plans_direct_cache.lua http://localhost:8081

perf-direct-no-cache:
	@echo "üöÄ –¢–µ—Å—Ç Planning Service –±–µ–∑ –∫–µ—à–∞ (5 –ø–æ—Ç–æ–∫–æ–≤)..."
	@$(MAKE) _check_wrk
	@echo "\n=== –¢–ï–°–¢ –ë–ï–ó –ö–ï–®–ê Planning Service (5 –ø–æ—Ç–æ–∫–æ–≤) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t5 -c5 -d30s -s performance_tests/wrk_scripts/get_plans_direct_no_cache.lua http://localhost:8081

perf-direct-compare:
	@echo "üöÄ –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç —Å –∫–µ—à–µ–º –∏ –±–µ–∑ –∫–µ—à–∞..."
	@$(MAKE) _check_wrk
	@echo "–û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º..."
	@$(MAKE) cache-clear
	@echo "–ü—Ä–æ–≥—Ä–µ–≤ –∫–µ—à–∞ –Ω–∞–ø—Ä—è–º—É—é –∫ Planning Service..."
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) curl -s -H "Authorization: Bearer $$AUTH_TOKEN" -H "X-User: admin" http://localhost:8081/plans > /dev/null && echo "–ö–µ—à –ø—Ä–æ–≥—Ä–µ—Ç"
	@echo "\n=== –¢–ï–°–¢ –° –ü–†–û–ì–†–ï–¢–´–ú –ö–ï–®–ï–ú Planning Service (5 –ø–æ—Ç–æ–∫–æ–≤) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t5 -c5 -d30s -s performance_tests/wrk_scripts/get_plans_direct_cache.lua http://localhost:8081
	@echo "\n‚è≥ –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏..."
	@sleep 5
	@echo "\n=== –¢–ï–°–¢ –ë–ï–ó –ö–ï–®–ê Planning Service (5 –ø–æ—Ç–æ–∫–æ–≤) ==="
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) wrk -t5 -c5 -d30s -s performance_tests/wrk_scripts/get_plans_direct_no_cache.lua http://localhost:8081
	@echo "\n‚úÖ –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!"

cache-clear:
	@echo "üóëÔ∏è –û—á–∏—Å—Ç–∫–∞ Redis –∫–µ—à–∞..."
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) curl -X POST -H "Authorization: Bearer $$AUTH_TOKEN" -H "X-User: admin" http://localhost:8081/cache/clear

cache-stats:
	@echo "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Redis –∫–µ—à–∞..."
	@AUTH_TOKEN=$$($(MAKE) _get_token_value) curl -H "Authorization: Bearer $$AUTH_TOKEN" -H "X-User: admin" http://localhost:8081/cache/stats | jq

# Helper commands
_check_wrk:
	@which wrk > /dev/null || (echo "‚ùå wrk –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ: https://github.com/wg/wrk"; exit 1)

_get_token:
	@echo "üîë –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞..."

_get_token_value:
	@curl -s -X POST "http://localhost:8000/auth/login" \
		-H "Content-Type: application/json" \
		-d '{"username": "admin", "password": "secret"}' | jq -r '.access_token'

all: help 